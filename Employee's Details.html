<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Details</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            position: relative;
            text-align: center;
            height: 90px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #f8f9fa;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            width: 100%;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            padding: 20px;
        }

        header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
            position: relative;
            z-index: 2;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        header p {
            font-weight: 300;
            font-size: 1.1rem;
            margin-top: 15px;
            max-width: 700px;
            opacity: 0.9;
            z-index: 2;
        }

        @keyframes moveCircles {
            0% { transform: translateY(0) translateX(0); }
            50% { transform: translateY(-50%) translateX(-50%); }
            100% { transform: translateY(0) translateX(0); }
        }

        .banner-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        .circle {
            position: absolute;
            width: 200px;
            height: 200px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: moveCircles 10s infinite linear;
        }

        .circle:nth-child(1) {
            top: 10%;
            left: 20%;
            animation-duration: 8s;
        }

        .circle:nth-child(2) {
            top: 50%;
            left: 70%;
            animation-duration: 12s;
        }

        .circle:nth-child(3) {
            top: 80%;
            left: 40%;
            animation-duration: 15s;
        }
        button {
            padding: 10px;
            margin-left: 50px;
            
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .button {
            padding: 10px;
            margin-left: 300px;
            background-color: #49007a;
            color: rgb(255, 255, 255);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .button:hover {
            background-color: #114a9f;
            color: white;
        }

        .form-container {
            display: none;
            padding: 20px;
           background: linear-gradient(rgba(195, 195, 255, 0.694),rgba(187, 238, 250, 0.566));
            width: 800px;
            margin-left: auto;
            margin-right: auto;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        .form-container h2{
            display: flex;
            justify-content: center;
        }
        .form-container input, .form-container select {
            width: 95%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        .form-container select {
            width: 98%;
        }

        .main-content {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            gap: 30px;
            padding: 20px;
        }

        .employee-row {
            display: flex;
            align-items: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            width: auto;
            flex-wrap: wrap;
            word-wrap: break-word;
            margin: 10px 0;
            padding: 10px;
            background: linear-gradient(rgba(221, 237, 255, 0.829), rgba(228, 228, 228, 0.559),rgba(207, 247, 252, 0.683));
        }

        .employee-row:hover {
          box-shadow: 0px 2px 5px rgba(90, 89, 89, 0.635);
        }

        .icon-img {
            height: 240px;
            width: 260px;
            margin-right: 20px;
        }

        .employee-details {
            padding: 10px;
        }

        .para {
            font-size: 18px;
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            margin: 5px 0;
           
        }

       
        .employee-details  i {
            margin-right: 20px;
        }

        .deletee {
            background-color: royalblue;
            color: white;
            margin-top: 10px;
            padding: 8px;
            width: 100px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .deletee:hover {
            background-color: #0073e6;
        }

        .edit-btn {
            background-color: #f3a3ff;
            color: black;
            padding: 8px;
            margin-top: 10px;
            width: 100px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
        }

        .edit-btn:hover {
            background-color: #ff80ff;
        }

        .back-btn, .save-btn {
            padding: 10px;
            display: flex;
            justify-content: center;
            margin-left: auto;
            margin-right: auto;
            width: 160px;
            border-radius: 5px;
            cursor: pointer;
        }

        .save-btn {
            background-color: #5b4caf;
            color: white;
        }

        .save-btn:hover {
            background-color: #a987ff;
        }

        .back-btn {
            background-color: #ff4444;
            color: white;
        }

        .back-btn:hover {
            background-color: #e53935;
        }
        .top-section{
            display: flex;
            flex-direction: row;
            margin-top: 20px;
            justify-content: space-between;
        }
        .search-bar {
    padding: 10px;
    margin-bottom: 20px;
    width: 250px;
    display: flex;
    padding: 10px;
    font-size: 16px;
    border-radius: 5px;
    border: 1px solid #ccc;
    margin-right: 10px;
}

.search-bar input {
    padding: 10px;
    font-size: 16px;
    border: none;
    width: 100%;
}
.search-bar input:focus {
    outline: none;
}

.search-bar i {
    font-size: 20px;
    padding-top: 7px;
    cursor: pointer;
    color: #000000;
}
.addnew{
    background: linear-gradient(rgb(139, 183, 220),rgb(5, 35, 145));
    color: rgb(255, 255, 255);
    height: 60px;
}

.error-message {
    color: red;
    font-size: 12px;
    margin-top: -8px;
    margin-bottom: 5px;
    display: none;
}

.input-group {
    margin-bottom: 5px;
}

/* Tablets and smaller screens */
@media screen and (max-width: 1024px) {
    .banner {
        width: 100%;
        padding: 10px;
        margin-bottom: 20px;
    }

    .banner h1 {
        font-size: 30px;
    }

    .banner p {
        font-size: 16px;
    }

    .main-content {
        flex-direction: column;
        align-items: center;
        padding: 10px;
    }

    .form-container {
        width: 90%;
        padding: 15px;
    }

    .employee-row {
        flex-direction: column;
        align-items: center;
        min-width: 100%;
        padding: 15px;
        text-align: center;
    }

    .icon-img {
        width: 200px;
        height: 200px;
        margin: 0 auto 15px;
    }

    .line {
        display: none;
    }

    .employee-details {
        padding: 10px;
        text-align: center;
    }

    .search-bar {
        width: 100%;
        justify-content: center;
    }

    .search-bar input {
        width: 70%;
    }

    .button {
        margin-left: 0;
        width: 100%;
        text-align: center;
    }
}

/* Mobile devices */
@media screen and (max-width: 768px) {
    .banner h1 {
        font-size: 24px;
    }

    .banner p {
        font-size: 14px;
    }

    .top-section {
        flex-direction: column;
        align-items: center;
    }

    .search-bar {
        width: 100%;
        margin-bottom: 15px;
    }

    .form-container {
        width: 100%;
        padding: 10px;
    }

    .employee-row {
        flex-direction: column;
        min-width: 100%;
        padding: 10px;
    }

    .icon-img {
        width: 180px;
        height: 180px;
    }

    .para {
        font-size: 16px;
    }

    .deletee, .edit-btn {
        width: 100%;
        margin: 5px 0;
    }

    .back-btn, .save-btn {
        width: 100%;
        margin-top: 10px;
    }
}

@media screen and (max-width: 480px) {
    .banner {
        padding: 10px;
        border-radius: 10px;
    }

    .banner h1 {
        font-size: 16px;
    }

    .banner p {
        font-size: 12px;
    }

    .icon-img {
        width: 150px;
        height: 150px;
    }

    .para {
        font-size: 14px;
    }

    .button, .addnew {
        width: 100%;
        text-align: center;
    }

    .search-bar {
        width: 40%;
        margin-top: 14px;
      
    }
    .top-section{
        display: flex;
        flex-direction: row;
        gap: 5px;
    }
    .addnew{
        width: 40%;
    }

    .search-bar input {
        width: 80%;
    }

    .employee-details {
        padding: 5px;
        text-align: center;
    }

    .form-container select {
        width: 100%;
    }
    .form-container input{
        width: 98%;
    }
   

    .deletee, .edit-btn {
        width: 40%;
        margin-left: 10px;
    }

    .back-btn, .save-btn {
        width: 100%;
    }
}

.employee-details {
    max-width: 1000px;
    margin: auto;
}

.para {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.para strong {
    display: inline-block;
    width: 160px; /* Fixed width for alignment */
}

.para .editable {
    margin-left: 10px;
}

.para i {
    width: 20px;
    margin-right: 10px;
}

    </style>
</head>
<body>
    <header>
        <div class="banner-background">
            <div class="circle"></div>
            <div class="circle"></div>
            <div class="circle"></div>
        </div>
        <h1>Employee's Profile Management Page</h1>
        <p>Track and manage employee details, add and remove employees</p>
    </header>

    <div class="top-section">
        <button class="addnew" onclick="toggleForm()">Add New Employee</button>
        
        <div class="search-bar">
            <input type="text" placeholder="Search..." id="searchInput" />
            <i class="fa-brands fa-searchengin" onclick="searchEmployees()"></i>
        </div>
    </div>

    <div class="form-container" id="employeeForm">
        <h2>Enter Employee Details</h2>
        <form id="addEmployeeForm">
            <div class="input-group">
                <label for="empName">Employee Name:</label>
                <input type="text" id="empName" placeholder="Enter Employee Name" required 
                       minlength="3" maxlength="50" 
                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$"
                       title="Name should contain only letters and spaces, no leading/trailing spaces">
                <div class="error-message" id="nameError"></div>
            </div>
            <div class="input-group">
                <label for="empId">Employee ID:</label>
                <input type="text" id="empId" placeholder="Enter Employee ID (7 characters)" required 
                       minlength="7" maxlength="7"  
                       pattern="^[A-Z]{3}[0-9]{4}$" 
                       title="Employee ID should be in the format: 3 uppercase letters followed by 4 digits">
                <div class="error-message" id="idError"></div>
            </div>
            <div class="input-group">
                <label for="empRole">Role:</label>
                <input type="text" id="empRole" placeholder="Enter Role" 
                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$" 
                       required minlength="3" maxlength="40"
                       title="Role should contain only letters and spaces">
                <div class="error-message" id="roleError"></div>
            </div>
            <div class="input-group">
                <label for="empGender">Gender:</label>
                <select id="empGender" name="gender" required>
                    <option value="">Select Gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
                <div class="error-message" id="genderError"></div>
            </div>
            <div class="input-group">
                <label for="empDob">Date of Birth:</label>
                <input type="date" id="empDob" placeholder="Enter Date of Birth" required>
                <div class="error-message" id="dobError"></div>
            </div>
            <div class="input-group">
                <label for="empLocation">Location:</label>
                <input type="text" id="empLocation" placeholder="Enter Location" required 
                       minlength="3" maxlength="40" 
                       pattern="^[A-Za-z]+(?: [A-Za-z]+)*$"
                       title="Location should contain only letters and spaces">
                <div class="error-message" id="locationError"></div>
            </div>
            <div class="input-group">
                <label for="empEmail">Email Address:</label>
                <input type="email" id="empEmail" placeholder="Enter Email Address" required 
                       minlength="5" maxlength="50" 
                       pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                       title="Please enter a valid email address">
                <div class="error-message" id="emailError"></div>
            </div>
            <div class="input-group">
                <label for="empPhone">Phone Number:</label>
                <input type="tel" id="empPhone" placeholder="Enter Phone Number (10 digits)" 
                       pattern="[0-9]{10}" maxlength="10" minlength="10" required
                       title="Phone number must be 10 digits">
                <div class="error-message" id="phoneError"></div>
            </div>
            <div class="input-group">
                <label for="empJoinDate">Join Date:</label>
                <input type="date" id="empJoinDate" placeholder="Enter Join Date" required>
                <div class="error-message" id="joinDateError"></div>
            </div>
            <div class="input-group">
                <label for="empExperience">Experience (in years):</label>
                <input type="number" id="empExperience" placeholder="Enter Experience (in years)" 
                       required min="0" max="40"
                       title="Experience must be between 0 and 40 years">
                <div class="error-message" id="experienceError"></div>
            </div>
            <div class="input-group">
                <label for="empSkills">Skills:</label>
                <input type="text" id="empSkills" placeholder="Enter Skills (comma separated)" 
                       required minlength="3" maxlength="100"
                       pattern="^[A-Za-z]+(?:,[A-Za-z]+)*$"
                       title="Enter skills separated by commas">
                <div class="error-message" id="skillsError"></div>
            </div>
            <div class="input-group">
                <label for="empAchievement">Career Achievement:</label>
                <input type="text" id="empAchievement" placeholder="Enter Career Achievement" 
                       required minlength="4" maxlength="100"
                       title="Achievement should be at least 4 characters">
                <div class="error-message" id="achievementError"></div>
            </div>
            <button type="submit" id="addemp" class="button">Add Employee</button>
        </form>
    </div>

    <div class="main-content" id="employeeCards"></div>

    <script>
        window.onload = function() {
            const employees = JSON.parse(localStorage.getItem('employees')) || [];
            employees.forEach(displayEmployeeCard);
            
            // Add event listeners for real-time validation
            document.getElementById('empName').addEventListener('input', validateName);
            document.getElementById('empId').addEventListener('input', validateId);
            document.getElementById('empEmail').addEventListener('input', validateEmail);
            document.getElementById('empPhone').addEventListener('input', validatePhone);
            document.getElementById('empDob').addEventListener('change', validateDob);
            document.getElementById('empJoinDate').addEventListener('change', validateJoinDate);
            document.getElementById('searchInput').addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    searchEmployees();
                }
            });
        };

        function toggleForm() {
            const form = document.getElementById('employeeForm');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
            document.getElementById('addemp').style.display = 'block';
            const saveBtn = document.querySelector('.save-btn');
            if (saveBtn) saveBtn.remove();
        }

        // Validation functions
        function validateName() {
            const name = document.getElementById('empName').value;
            const errorElement = document.getElementById('nameError');
            
            if (!name.match(/^[A-Za-z]+(?: [A-Za-z]+)*$/)) {
                errorElement.textContent = "Name should contain only letters and spaces, no leading/trailing spaces";
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        function validateId() {
            const id = document.getElementById('empId').value;
            const errorElement = document.getElementById('idError');
            const employees = JSON.parse(localStorage.getItem('employees')) || [];
            
            if (!id.match(/^[ATS]{3}[0-9]{4}$/)) {
                errorElement.textContent = "ID must be 3 uppercase letters followed by 4 digits (e.g., ABC1234)";
                errorElement.style.display = 'block';
                return false;
            }
            
            // Check if ID already exists (only when adding new employee)
            if (document.getElementById('addemp').style.display !== 'none' && 
                employees.some(emp => emp.id === id)) {
                errorElement.textContent = "This Employee ID already exists";
                errorElement.style.display = 'block';
                return false;
            }
            
            errorElement.style.display = 'none';
            return true;
        }

        function validateEmail() {
            const email = document.getElementById('empEmail').value;
            const errorElement = document.getElementById('emailError');
            
            if (!email.match(/^[a-zA-Z0-9]+@[a-zA-Z]+\.[a-zA-Z]{2,3}$/)) {
                errorElement.textContent = "Please enter a valid email address";
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        function validatePhone() {
            const phone = document.getElementById('empPhone').value;
            const errorElement = document.getElementById('phoneError');
            
            if (!phone.match(/^[0-9]{10}$/)) {
                errorElement.textContent = "Phone number must be exactly 10 digits";
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        function validateDob() {
            const dob = document.getElementById('empDob').value;
            const errorElement = document.getElementById('dobError');
            const age = calculateAge(dob);
            
            if (age < 20 || age > 60) {
                errorElement.textContent = "Employee's age must be between 20 and 60 years";
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        function validateJoinDate() {
    const joinDate = document.getElementById('empJoinDate').value;
    const dob = document.getElementById('empDob').value;
    const errorElement = document.getElementById('joinDateError');
    
    const today = new Date().toISOString().split('T')[0];
    const minJoinDate = '2021-01-01';

    if (joinDate > today) {
        errorElement.textContent = "Join date must be today or a previous date.";
        errorElement.style.display = 'block';
        return false;
    }

    if (joinDate < minJoinDate) {
        errorElement.textContent = "Join date cannot be earlier than January 1, 2021.";
        errorElement.style.display = 'block';
        return false;
    }

    if (dob && new Date(joinDate) < new Date(dob)) {
        errorElement.textContent = "Join date cannot be before date of birth.";
        errorElement.style.display = 'block';
        return false;
    }

    errorElement.style.display = 'none';
    return true;
}


        function calculateAge(dob) {
            if (!dob) return 0;
            
            const birthDate = new Date(dob);
            const today = new Date();
            let age = today.getFullYear() - birthDate.getFullYear();
            const month = today.getMonth() - birthDate.getMonth();
            
            if (month < 0 || (month === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            
            return age;
        }

        function validateEmployeeForm() {
            const isValid = 
                validateName() &&
                validateId() &&
                validateEmail() &&
                validatePhone() &&
                validateDob() &&
                validateJoinDate();
            
            return isValid;
        }

        document.getElementById('addEmployeeForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const existingSaveBtn = document.querySelector('.save-btn');
            if (existingSaveBtn) {
                existingSaveBtn.remove();
            }
            
            if (!validateEmployeeForm()) return;
            
            const newEmployee = {
                id: document.getElementById('empId').value,
                name: document.getElementById('empName').value,
                role: document.getElementById('empRole').value,
                gender: document.getElementById('empGender').value,
                dob: document.getElementById('empDob').value,
                location: document.getElementById('empLocation').value,
                email: document.getElementById('empEmail').value,
                phone: document.getElementById('empPhone').value,
                joinDate: document.getElementById('empJoinDate').value,
                experience: document.getElementById('empExperience').value,
                skills: document.getElementById('empSkills').value,
                achievement: document.getElementById('empAchievement').value,
            };
            
            const employees = JSON.parse(localStorage.getItem('employees')) || [];
            
            // Check if we're editing an existing employee
            const existingIndex = employees.findIndex(emp => emp.id === newEmployee.id);
            if (existingIndex >= 0) {
                employees[existingIndex] = newEmployee;
            } else {
                employees.push(newEmployee);
            }
            
            localStorage.setItem('employees', JSON.stringify(employees));
            document.getElementById('employeeCards').innerHTML = '';
            employees.forEach(displayEmployeeCard);
            document.getElementById('addEmployeeForm').reset();
            document.getElementById('employeeForm').style.display = 'none';
        });

        function displayEmployeeCard(employee) {
            const employeeCard = document.createElement('div');
            employeeCard.classList.add('employee-row');
            employeeCard.id = `employee-${employee.id}`;
            
            // Format dates for display
            const dobDate = new Date(employee.dob);
            const joinDate = new Date(employee.joinDate);
            
            const formattedDob = dobDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const formattedJoinDate = joinDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            
            employeeCard.innerHTML = `
                <div class="line"></div>
                <div class="employee-details">
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-user icon"></i><strong class="label">Name</strong><span class="colon">:</span><span class="editable value" data-field="name">${employee.name}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-id-badge icon"></i><strong class="label">Employee ID</strong><span class="colon">:</span><span class="editable value" data-field="id">${employee.id}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-briefcase icon"></i><strong class="label">Role</strong><span class="colon">:</span><span class="editable value" data-field="role">${employee.role}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-person icon"></i><strong class="label">Gender</strong><span class="colon">:</span><span class="editable value" data-field="gender">${employee.gender}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-cake-candles icon"></i><strong class="label">DOB</strong><span class="colon">:</span><span class="editable value" data-field="dob">${formattedDob}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-map-marker-alt icon"></i><strong class="label">Location</strong><span class="colon">:</span><span class="editable value" data-field="location">${employee.location}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-envelope icon"></i><strong class="label">Email</strong><span class="colon">:</span><span class="editable value" data-field="email">${employee.email}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-phone icon"></i><strong class="label">Phone</strong><span class="colon">:</span><span class="editable value" data-field="phone">${employee.phone}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-calendar-check icon"></i><strong class="label">Join Date</strong><span class="colon">:</span><span class="editable value" data-field="joinDate">${formattedJoinDate}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-chalkboard-teacher icon"></i><strong class="label">Experience</strong><span class="colon">:</span><span class="editable value" data-field="experience">${employee.experience} years</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-certificate icon"></i><strong class="label">Skills</strong><span class="colon">:</span><span class="editable value" data-field="skills">${employee.skills}</span></p>
                    </div>
                    <div class="detail-row">
                        <p class="para"><i class="fa-solid fa-trophy icon"></i><strong class="label">Achievement</strong><span class="colon">:</span><span class="editable value" data-field="achievement">${employee.achievement}</span></p>
                    </div>

                    <button class="deletee" onclick="deleteEmployee('${employee.id}')">Delete</button>
                    <button class="edit-btn" onclick="editEmployee('${employee.id}')">Edit</button>
                </div>
            `;
            document.getElementById('employeeCards').appendChild(employeeCard);
        }

        function deleteEmployee(employeeId) {
            if (!confirm('Are you sure you want to delete this employee?')) return;
            
            let employees = JSON.parse(localStorage.getItem('employees')) || [];
            employees = employees.filter(emp => emp.id !== employeeId);
            localStorage.setItem('employees', JSON.stringify(employees));
            const employeeCard = document.getElementById(`employee-${employeeId}`);
            if (employeeCard) {
                employeeCard.remove();
            }
        }

        function editEmployee(employeeId) {
            const employees = JSON.parse(localStorage.getItem('employees'));
            const employee = employees.find(emp => emp.id === employeeId);
            if (!employee) return;
            
            // Populate form with employee data
            document.getElementById('empId').value = employee.id;
            document.getElementById('empName').value = employee.name;
            document.getElementById('empRole').value = employee.role;
            document.getElementById('empGender').value = employee.gender;
            document.getElementById('empDob').value = employee.dob;
            document.getElementById('empLocation').value = employee.location;
            document.getElementById('empEmail').value = employee.email;
            document.getElementById('empPhone').value = employee.phone;
            document.getElementById('empJoinDate').value = employee.joinDate;
            document.getElementById('empExperience').value = employee.experience;
            document.getElementById('empSkills').value = employee.skills;
            document.getElementById('empAchievement').value = employee.achievement;
            
            // Show form and hide add button
            document.getElementById('employeeForm').style.display = 'block';
            document.getElementById('addemp').style.display = 'none';
            
            // Remove any existing save button
            const existingSaveBtn = document.querySelector('.save-btn');
            if (existingSaveBtn) {
                existingSaveBtn.remove();
            }
            
            // Create save button
            const saveBtn = document.createElement('button');
            saveBtn.classList.add('save-btn');
            saveBtn.textContent = 'Save Changes';
            saveBtn.onclick = function() {
                if (!validateEmployeeForm()) return;
                
                const updatedEmployee = {
                    id: document.getElementById('empId').value,
                    name: document.getElementById('empName').value,
                    role: document.getElementById('empRole').value,
                    gender: document.getElementById('empGender').value,
                    dob: document.getElementById('empDob').value,
                    location: document.getElementById('empLocation').value,
                    email: document.getElementById('empEmail').value,
                    phone: document.getElementById('empPhone').value,
                    joinDate: document.getElementById('empJoinDate').value,
                    experience: document.getElementById('empExperience').value,
                    skills: document.getElementById('empSkills').value,
                    achievement: document.getElementById('empAchievement').value,
                };
                
                const index = employees.findIndex(emp => emp.id === employeeId);
                if (index !== -1) {
                    employees[index] = updatedEmployee;
                    localStorage.setItem('employees', JSON.stringify(employees));
                    
                    // Refresh the display
                    document.getElementById('employeeCards').innerHTML = '';
                    employees.forEach(displayEmployeeCard);
                }
                
                document.getElementById('employeeForm').style.display = 'none';
                document.getElementById('addEmployeeForm').reset();
            };
            
            document.getElementById('employeeForm').appendChild(saveBtn);
            
            // Scroll to form
            document.getElementById('employeeForm').scrollIntoView({ behavior: 'smooth' });
        }

        function searchEmployees() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const employees = JSON.parse(localStorage.getItem('employees')) || [];
            
            if (!searchTerm) {
                // If search is empty, show all employees
                document.getElementById('employeeCards').innerHTML = '';
                employees.forEach(displayEmployeeCard);
                return;
            }
            
            const filteredEmployees = employees.filter(emp => 
                emp.name.toLowerCase().includes(searchTerm) || 
                emp.id.toLowerCase().includes(searchTerm) ||
                emp.role.toLowerCase().includes(searchTerm) ||
                emp.email.toLowerCase().includes(searchTerm) ||
                emp.phone.includes(searchTerm)
            );
            
            document.getElementById('employeeCards').innerHTML = '';
            filteredEmployees.forEach(displayEmployeeCard);
        }
    </script>
</body>
</html>
