<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payslip Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Arima:wght@100..700&family=Lobster&family=Satisfy&family=Silkscreen:wght@400;700&family=Sixtyfour+Convergence&display=swap" rel="stylesheet">
    <style>
      body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: white;
    padding: 0;
}

.main-content {
    display: flex;
    padding: 32px; 
    gap: 32px; 
    justify-content: center;
    margin: 0 auto;
    max-width: 960px; 
}

    header {
      position: relative;
      text-align: center;
      height: 120px; 
      background-color: #5f06a8;
      color: #fff;
      border-radius: 15px;
      overflow: hidden;
      display: flex;
      width: 98%;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    header h1 {
      margin: 0;
      font-size: 36px;
      color: white;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 2px;
      position: relative;
      z-index: 2;
    }
header p{
    font-weight: 100;
      font-size: 18px;
      margin-top: 10px;
}
  
    @keyframes moveCircles {
      0% {
        transform: translateY(0) translateX(0);
      }
      50% {
        transform: translateY(-50%) translateX(-50%);
      }
      100% {
        transform: translateY(0) translateX(0);
      }
    }

    .banner-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
      overflow: hidden;
    }

    .circle {
      position: absolute;
      width: 200px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: moveCircles 10s infinite linear;
    }

    .circle:nth-child(1) {
      top: 10%;
      left: 20%;
      animation-duration: 8s;
    }

    .circle:nth-child(2) {
      top: 50%;
      left: 70%;
      animation-duration: 12s;
    }

    .circle:nth-child(3) {
      top: 80%;
      left: 40%;
      animation-duration: 15s;
    }

.payslipcontainer {
    background: linear-gradient(rgba(232, 232, 255, 0.763),rgba(255, 223, 255, 0.772));
    width: 100%;
    max-width: 500px;
    padding-left: 48px; 
    padding-right: 64px; 
    padding-bottom: 32px; 
    border-radius: 10px;
   margin-left: auto;
   margin-right: auto;
   box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-align: center;
}

.payslipcontainer h2 {
    font-size: 24px; /* 20% decreased font size */
    margin-bottom: 24px; /* 20% decreased margin */
    font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
    color: #580b01;
}

.input-group {
    margin-bottom: 16px; /* 20% decreased margin */
    text-align: left;
}

.input-group label {
    font-size: 13.6px; /* 20% decreased font size */
    margin-bottom: 8px; /* 20% decreased margin */
    color: #3d3d3d;
}

.input-group input {
    width: 100%;
    padding: 10px; /* 20% decreased padding */
    font-size: 12.8px; /* 20% decreased font size */
    border-radius: 5px;
}

.btn,
.btn * {
    border: 0 solid;
    box-sizing: border-box;
}

.btn {
    -webkit-tap-highlight-color: transparent;
    -webkit-appearance: button;
    background-color: #000000;
    background-image: none;
    color: #fff;
    cursor: pointer;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Arial, Noto Sans, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol, Noto Color Emoji;
    font-size: 80%; /* 20% decreased font size */
    font-weight: 900;
    line-height: 1.5;
    margin: 0;

    -webkit-mask: -webkit-radial-gradient(#000, #fff);
    padding: 0;
    text-transform: uppercase;
}

.btn:disabled {
    cursor: default;
}

.btn:-moz-focusring {
    outline: auto;
}

.btn svg {
    display: block;
}

.btn [hidden] {
    display: none;
}

.btn {
    border-radius: 99rem;
    border-width: 2px;
    overflow: hidden;
    padding: 0.64rem 2.4rem; /* 20% decreased padding */
    position: relative;
}

.btn span {
    mix-blend-mode: difference;
}

.btn:after,
.btn:before {
    background: linear-gradient(90deg, #fff 25%, transparent 0, transparent 50%, #fff 0, #fff 75%, transparent 0);
    content: "";
    inset: 0;
    position: absolute;
    transform: translateY(var(--progress, 100%));
    transition: transform 0.2s ease;
}

.btn:after {
    --progress: -100%;
    background: linear-gradient(90deg, transparent 0, transparent 25%, #fff 0, #fff 50%, transparent 0, transparent 75%, #fff 0);
    z-index: -1;
}

.btn:hover:after,
.btn:hover:before {
    --progress: 0;
}

.payslip-container {
    width: 100%;
    max-width: 400px; /* 20% decreased max-width */
    display: flex;
    flex-direction: column;
    gap: 16px; /* 20% decreased gap */
    display: none;
}

.card {
    background: linear-gradient(rgba(255, 249, 238, 0.543), rgba(255, 255, 255, 0.281), rgba(236, 254, 255, 0.582));
    border-radius: 10px;
    padding: 12px; /* 20% decreased padding */
    box-shadow: 0 0 8px rgba(244, 6, 105, 0.5), 0 0 15px rgba(7, 168, 141, 0.5), 0 0 25px rgba(17, 12, 83, 0.5);
}

.card h4 {
    color: #580b01;
    text-align: center;
    margin-bottom: 12px; 
}

.payslip-details {
    margin-bottom: 8px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
}

.payslip-details label {
    font-weight: bold;
    color: #333;
}

.payslip-details p {
    color: #555;
    margin: 0;
}

.total {
    font-weight: bold;
    color: #333;
}

        @media (max-width: 768px) {
    .main-content {
        flex-direction: column;
        gap: 20px;
        padding: 15px;
    }

    .payslipcontainer {
        max-width: 100%;
        padding: 15px;
    }

    .input-group input {
        padding: 10px;
        font-size: 12px;
    }

    .card {
        width: 100%;
        margin-bottom: 15px;
    }

    .payslip-container {
        width: 100%;
        max-width: 100%;
        gap: 10px;
    }
}


@media (max-width: 600px) {
    .main-content {
        padding: 10px;
        gap: 10px;
    }

    .payslipcontainer {
        padding: 15px;
        max-width: 100%;
    }

    .card {
        width: 100%;
        padding: 12px;
    }

    .input-group input {
        font-size: 12px;
    }
}
@media (min-width: 1024px) {
    .main-content {
        justify-content: flex-start;
    }
    .payslipcontainer {
        max-width: 450px;
    }
}

/* Tablets (768px and below) */
@media (max-width: 768px) {
    .banner h1 {
        font-size: 24px;
    }
    .banner p {
        font-size: 13px;
    }
    .main-content {
        flex-direction: column;
        align-items: center;
        padding: 24px;
    }
    .payslipcontainer {
        width: 90%;
        max-width: 350px;
        padding: 24px;
    }
    .btn {
        padding: 0.5rem 2rem;
        font-size: 14px;
    }
}

@media (max-width: 450px) {
    body {
        padding: 10px;
    }
    .banner {
        width: 94%;
        padding: 10px;
        border-radius: 10px;
    }
    .banner h1 {
        font-size: 20px;
    }
    .banner p {
        font-size: 12px;
    }
    .main-content {
        flex-direction: column;
        align-items: center;
        padding: 16px;
        gap: 16px;
    }
    .payslipcontainer {
        width: 90%;
        padding: 20px;
       
    }
    .input-group input {
    width: 93%;
    }
    .btn {
        padding: 0.4rem 1.8rem;
        font-size: 12px;
    }
    .card {
        padding: 7px;
    }
    .card h4 {
        font-size: 14px;
    }
    .payslip-details label {
        font-size: 12px;
    }
    .payslip-details p {
        font-size: 12px;
    }
}

.dark-mode{
    background-color: #000000;
    color: #ffffff;
}

.dark-mode .payslipcontainer {
    background: linear-gradient(rgba(30, 30, 40, 0.9), rgba(40, 20, 40, 0.9));
    box-shadow: 0 4px 6px rgba(220, 220, 220, 0.3);
    border: 1px solid #333;
}

.dark-mode .payslipcontainer h2 {
    color: #bb86fc;
}

.dark-mode .input-group label {
    color: #ffffff;
}

.dark-mode .input-group input {
    background-color: #333;
    color: #ffffff;
    border: 1px solid #444;
}

.dark-mode .btn {
    background-color: #333;
    color: #ffffff;
    border: 2px solid #bb86fc;
}

.dark-mode .btn:hover {
    background-color: #676767;
    color: #f7f7f7;
}

.dark-mode .card {
    background: linear-gradient(rgba(30, 30, 40, 0.7), rgba(40, 20, 40, 0.7));
    box-shadow: 0 0 8px rgba(187, 134, 252, 0.3),
                0 0 15px rgba(100, 220, 200, 0.3),
                0 0 25px rgba(70, 60, 120, 0.3);
    border: 1px solid #333;
}

.dark-mode .card h4 {
    color: #bb86fc;
}

.dark-mode .payslip-details label {
    color: #ffffff;
}

.dark-mode .payslip-details p {
    color: #ffffff;
}

.dark-mode .total {
    color: #bb86fc;
}

.dark-mode header {
    background-color: #2a044a;
}

.dark-mode header h1 {
    color: #bb86fc;
}

.dark-mode header p {
    color: #ffffff;
}

.dark-mode .circle {
    background: rgba(187, 134, 252, 0.1);
}
    </style>
</head>
<body>
    <header>
        <div class="banner-background">
          <div class="circle"></div>
          <div class="circle"></div>
          <div class="circle"></div>
        </div>
        <h1>Payslip Generator<h1>
            <p>Track you payslip details here</p>
      </header>
    <div class="main-content">
        <div class="payslipcontainer">
            <h2> </h2>
            <form id="payslipForm" onsubmit="return generatePayslip()">
                <div class="input-group">
                    <label for="employeeName">Employee Name</label>
                    <input 
                        id="employeeName" 
                        type="text" 
                        placeholder="Enter your Name" 
                        required 
                        minlength="3" 
                        maxlength="50"
                        pattern="^[A-Za-z]+(?:\.[A-Za-z]+)*(?: [A-Za-z]+)*(?:\.[A-Za-z]+){0,3}$"
                        title="Username cannot start with a space, no consecutive spaces allowed, maximum 8 spaces and 3 periods allowed.">
                </div>

                <div class="input-group">
                    <label for="employeeID">Employee Id</label>
                    <input 
                        id="employeeId" 
                        type="text" 
                        placeholder="Enter your EmployeeID" 
                        required 
                        minlength="7" 
                        maxlength="7" 
                        pattern="^[A-Z]{3}0(?!000)[0-9]{3}$"
                        title="Employee ID should be in the format: 3 uppercase letters followed by 4 digits, starting from 0001 (cannot be 0000)">
                </div>
                
                  
                
                <div class="input-group">
                    <label for="email">Email Address</label>
                    <input 
                        id="email" 
                        type="email" 
                        placeholder="Enter your Email ID" 
                        required  
                        minlength="8"
                        maxlength="50"
                        title="Please enter a valid email address">
                </div>
                
                <div class="input-group">
                    <label for="password">Password</label>
                    <input 
                        id="password" 
                        type="password" 
                        placeholder="Enter your password (min 1 letter, 1 number, 1 symbol)" 
                        required 
                        minlength="5" 
                        maxlength="50"
                        pattern="^(?=.*[A-Za-z])(?=.*[0-9])(?=.*[\W_]).{5,}$" 
                        title="Password must be at least 5 characters long and include at least one letter, one number, and one symbol (e.g., @, #, $, %)">
                </div>
                
                
                <div class="input-group">
                    <label for="startMonth">Select Start Month:</label>
                    <input 
                        type="month" 
                        id="startMonth" 
                        name="startMonth" 
                        placeholder="Select start month" 
                        required>
                </div>
                
                <div class="input-group">
                    <label for="endMonth">Select End Month (optional):</label>
                    <input 
                        type="month" 
                        id="endMonth" 
                        name="endMonth" 
                        placeholder="Select end month">
                </div>
                
    
                <button type="submit" class="btn"><span>Generate Payslip</span></button>
                <button type="button" class="btn" id="downloadButton" style="display: none; margin-left: 100px;">Download Payslip</button>

            </form>
        </div>

        <div class="payslip-container" id="payslipContainer">
            <div class="card">
                <h4>Employee Details & Net Pay</h4>
                <div class="payslip-details">
                    <label for="employeeNameDisplay">Employee:</label>
                    <p id="employeeNameDisplay">Employee Name</p>
                </div>
                <div class="payslip-details">
                    <label for="employeeId">Employee ID:</label>
                    <p id="employeeIdDisplay">Employee ID:</p>
                </div>
                <div class="payslip-details">
                    <label for="department">Department:</label>
                    <p>Software Developer</p>
                </div>
                <div class="payslip-details">
                    <label for="payPeriod">Pay Period:</label>
                    <p id="payPeriod">Oct 2024</p>
                </div>
                <div class="payslip-details total">
                    <label for="netPay">Net Pay:</label>
                    <p id="netPay">₹24,528.00</p>
                </div>
            </div>

            <div class="card">
                <h4>Earnings</h4>
                <div class="payslip-details">
                    <label for="basicSalary">Basic Salary:</label>
                    <p>₹16,250.00</p>
                </div>
                <div class="payslip-details">
                    <label for="dearnessAllowance">Dearness Allowance:</label>
                    <p>₹550.00</p>
                </div>
                <div class="payslip-details">
                    <label for="houseRentAllowance">House Rent Allowance:</label>
                    <p>₹1,650.00</p>
                </div>
                <div class="payslip-details">
                    <label for="wageAllowance">Wage Allowance:</label>
                    <p>₹120.00</p>
                </div>
                <div class="payslip-details">
                    <label for="medicalAllowance">Medical Allowance:</label>
                    <p>₹3,000.00</p>
                </div>
                <div class="payslip-details total">
                    <label>Total Earnings:</label>
                    <p>₹21,670.00</p>
                </div>
            </div>

            <div class="card">
                <h4>Deductions</h4>
                <div class="payslip-details">
                    <label for="providentFund">Provident Fund:</label>
                    <p>₹1,800.00</p>
                </div>
                <div class="payslip-details">
                    <label for="employeeStateInsurance">Employee State Insurance:</label>
                    <p>₹142.00</p>
                </div>
                <div class="payslip-details">
                    <label for="taxDeductedAtSource">Tax Deducted at Source:</label>
                    <p>₹0.00</p>
                </div>
                <div class="payslip-details">
                    <label for="leaveWithoutPay">Leave Without Pay:</label>
                    <p>₹0.00</p>
                </div>
                <div class="payslip-details">
                    <label for="specialDeduction">Special Deduction:</label>
                    <p>₹500.00</p>
                </div>
                <div class="payslip-details total">
                    <label>Total Deductions:</label>
                    <p>₹2,442.00</p>
                </div>
            </div>
        </div>
    </div>

    <script>
     document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("payslipForm");
    
    const fields = [
        { id: "employeeName", pattern: /^[A-Za-z]+(?:\.[A-Za-z]+)*(?: [A-Za-z]+)*(?:\.[A-Za-z]+){0,3}$/, message: "Invalid name format." },
        { id: "employeeId", pattern: /^[A-Z]{3}0(?!000)[0-9]{3}$/, message: "Invalid Employee ID format." },
        { id: "email", pattern: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/, message: "Invalid email format." },
        { id: "password", pattern: /^(?=.*[A-Za-z])(?=.*[0-9])(?=.*[\W_]).{5,}$/, message: "Password must include at least one letter, one number, and one symbol." }
    ];

    fields.forEach(field => {
        const input = document.getElementById(field.id);
        const error = document.createElement("p");
        error.style.color = "red";
        error.style.fontSize = "12px";
        error.style.marginTop = "5px";
        error.style.display = "none";
        input.parentNode.appendChild(error);

        input.addEventListener("input", function () {
            if (!field.pattern.test(input.value)) {
                error.textContent = field.message;
                error.style.display = "block";
            } else {
                error.style.display = "none";
            }
        });
    });

    form.addEventListener("submit", function (event) {
        let valid = true;
        fields.forEach(field => {
            const input = document.getElementById(field.id);
            const error = input.nextElementSibling;
            if (!field.pattern.test(input.value)) {
                error.textContent = field.message;
                error.style.display = "block";
                valid = false;
            }
        });
        if (!valid) event.preventDefault();
    });

    function generatePayslip() {
        const employeeName = document.getElementById('employeeName').value;
        const employeeId = document.getElementById('employeeId').value;
        const startMonth = document.getElementById('startMonth').value;
        const endMonth = document.getElementById('endMonth').value;

        const currentDate = new Date();
        const currentYear = currentDate.getFullYear();
        const currentMonth = currentDate.getMonth();
    
        const startMonthDate = new Date(`${startMonth}-01`);
        if (isNaN(startMonthDate)) {
            alert("Invalid start month format.");
            return false;
        }
    
        const startYear = startMonthDate.getFullYear();
        const startMonthNum = startMonthDate.getMonth();
    
        let endMonthDate = null;
        let endYear = null;
        let endMonthNum = null;
        if (endMonth) {
            endMonthDate = new Date(`${endMonth}-01`);
            if (isNaN(endMonthDate)) {
                alert("Invalid end month format.");
                return false;
            }
            endYear = endMonthDate.getFullYear();
            endMonthNum = endMonthDate.getMonth();
        }
    
        if (startYear > currentYear || (startYear === currentYear && startMonthNum > currentMonth)) {
            alert("Start month cannot be in the future.");
            return false;
        }
    
        if (endMonth && (endYear > currentYear || (endYear === currentYear && endMonthNum > currentMonth))) {
            alert("End month cannot be in the future.");
            return false;
        }
    
        if (endMonth && (endYear < startYear || (endYear === startYear && endMonthNum <= startMonthNum))) {
            alert("End month must be greater than the start month.");
            return false;
        }
    
        if (startYear < 2022) {
            alert("Invalid start month. It must be from 2022 onwards.");
            return false;
        }
    
        if (endMonth && endYear < 2022) {
            alert("Invalid end month. It must be from 2022 onwards.");
            return false;
        }
    
        document.getElementById('employeeNameDisplay').textContent = employeeName;
        document.getElementById('employeeIdDisplay').textContent = employeeId;
    
        const startMonthName = startMonthDate.toLocaleString('default', { month: 'long', year: 'numeric' });
        const endMonthName = endMonth ? endMonthDate.toLocaleString('default', { month: 'long', year: 'numeric' }) : startMonthName;
    
        document.getElementById('payPeriod').textContent = `${startMonthName} - ${endMonthName}`;
    
        document.getElementById('payslipContainer').style.display = 'flex';
        document.getElementById('downloadButton').style.display = 'block';
    
        return false;
    }

    function downloadPayslip() {
        const employeeName = document.getElementById('employeeName').value;
        const employeeId = document.getElementById('employeeId').value;
        const email = document.getElementById('email').value;
        const payPeriod = document.getElementById('payPeriod').textContent;
        const salary = document.getElementById('salary').textContent;
        const earnings = document.getElementById('earnings').textContent;
        const deductions = document.getElementById('deductions').textContent;
        const netPay = document.getElementById('netPay').textContent;
        
        const payslipText = `Employee Name: ${employeeName}\nEmployee ID: ${employeeId}\nEmail: ${email}\nPay Period: ${payPeriod}\nTotal Salary: ${salary}\nTotal Earnings: ${earnings}\nTotal Deductions: ${deductions}\nNet Pay: ${netPay}`;
        const blob = new Blob([payslipText], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'Payslip.txt';
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }

    form.addEventListener("submit", function (event) {
        event.preventDefault();
        if (generatePayslip()) {
            form.submit();
        }
    });

    document.getElementById('downloadButton').addEventListener('click', downloadPayslip);
});


// Check localStorage for dark mode preference on iframe load
window.onload = function () {
 const isDarkMode = localStorage.getItem('darkMode') === 'true';
 if (isDarkMode) {
   document.body.classList.add('dark-mode');
 } else {
   document.body.classList.remove('dark-mode');
 }
};

window.addEventListener('message', function (event) {
 
 if (event.data && typeof event.data.darkMode === 'boolean') {
   const isDarkMode = event.data.darkMode;

   
   if (isDarkMode) {
     document.body.classList.add('dark-mode');
   } else {
     document.body.classList.remove('dark-mode');
   }
 }
});

// Check localStorage for dark mode preference on iframe load
window.onload = function () {
 const isDarkMode = localStorage.getItem('darkMode') === 'true';
 if (isDarkMode) {
   document.body.classList.add('dark-mode');
 } else {
   document.body.classList.remove('dark-mode');
 }
};
    </script>
</body>
</html>

